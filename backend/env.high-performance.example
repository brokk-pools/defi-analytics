# High-Performance Configuration for 5000+ req/sec
# Copy this to .env for production high-volume scenarios

# ===========================================
# RATE LIMITING (ADJUSTED FOR HIGH VOLUME)
# ===========================================
RATE_LIMIT_WINDOW_MS=60000                    # 1 minute window
RATE_LIMIT_MAX_REQUESTS=10000                 # 10,000 requests per minute per IP
WEBHOOK_RATE_LIMIT_WINDOW_MS=60000            # 1 minute window
WEBHOOK_RATE_LIMIT_MAX_REQUESTS=50000         # 50,000 webhook requests per minute

# ===========================================
# RPC CONFIGURATION
# ===========================================
HELIUS_API_KEY=your_helius_api_key_here
HELIUS_RPC=https://mainnet.helius-rpc.com/?api-key=${HELIUS_API_KEY}
RPC_PROVIDER=helius
ORCA_WHIRLPOOLS_PROGRAM_ID=whirLbMiicVdio4qvUfM5KAg6Ct8VwpYzGff3uctyCc

# ===========================================
# REDIS CACHING (REQUIRED FOR HIGH PERFORMANCE)
# ===========================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# Cache TTL settings (in milliseconds)
CACHE_TTL_POSITIONS=30000                     # 30 seconds
CACHE_TTL_POOLS=60000                         # 1 minute
CACHE_TTL_TOP_POSITIONS=300000                # 5 minutes
CACHE_TTL_WALLET=60000                        # 1 minute

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
DATABASE_URL=postgresql://user:password@localhost:5432/orca_analytics
DB_POOL_MIN=5                                 # Minimum connections
DB_POOL_MAX=20                                # Maximum connections
DB_POOL_IDLE_TIMEOUT=30000                    # 30 seconds

# ===========================================
# SERVER CONFIGURATION
# ===========================================
PORT=3001
HOST=0.0.0.0                                  # Listen on all interfaces
NODE_ENV=production
MAX_REQUEST_SIZE=10mb

# ===========================================
# CONNECTION POOLING
# ===========================================
RPC_CONNECTION_POOL_SIZE=10                   # Number of RPC connections
RPC_CONNECTION_TIMEOUT=30000                  # 30 seconds
RPC_CONNECTION_RETRY_ATTEMPTS=3

# ===========================================
# CORS CONFIGURATION
# ===========================================
CORS_ORIGIN=https://yourdomain.com,https://api.yourdomain.com
CORS_CREDENTIALS=true

# ===========================================
# SECURITY CONFIGURATION
# ===========================================
TRUST_PROXY=true                              # For load balancers
SESSION_SECRET=your_very_secure_session_secret_here
WEBHOOK_SECRET=your_webhook_secret_here
COOKIE_SAME_SITE=strict

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
LOG_LEVEL=info                                # error, warn, info, debug
LOG_FILE_MAX_SIZE=10m
LOG_FILE_MAX_FILES=5

# ===========================================
# MONITORING & METRICS
# ===========================================
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_ENDPOINT=/metrics

# ===========================================
# QUEUE CONFIGURATION (FOR ASYNC PROCESSING)
# ===========================================
QUEUE_REDIS_URL=redis://localhost:6379/1
QUEUE_CONCURRENCY=5                           # Number of concurrent workers
QUEUE_MAX_ATTEMPTS=3                          # Max retry attempts

# ===========================================
# PERFORMANCE TUNING
# ===========================================
UV_THREADPOOL_SIZE=16                         # Increase thread pool size
NODE_OPTIONS=--max-old-space-size=4096        # Increase memory limit
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6

# ===========================================
# HELIUS SPECIFIC (MULTIPLE API KEYS FOR LOAD BALANCING)
# ===========================================
HELIUS_API_KEY_1=your_first_helius_key
HELIUS_API_KEY_2=your_second_helius_key
HELIUS_API_KEY_3=your_third_helius_key
HELIUS_API_KEY_4=your_fourth_helius_key
HELIUS_API_KEY_5=your_fifth_helius_key

# ===========================================
# CACHE WARMING
# ===========================================
ENABLE_CACHE_WARMING=true
CACHE_WARMING_INTERVAL=300000                 # 5 minutes
WARM_TOP_POSITIONS=true
WARM_POPULAR_POOLS=true

# ===========================================
# CIRCUIT BREAKER
# ===========================================
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_THRESHOLD=50                  # 50% failure rate
CIRCUIT_BREAKER_TIMEOUT=60000                 # 1 minute timeout
CIRCUIT_BREAKER_RESET_TIMEOUT=30000           # 30 seconds reset

# ===========================================
# HEALTH CHECK CONFIGURATION
# ===========================================
HEALTH_CHECK_INTERVAL=30000                   # 30 seconds
HEALTH_CHECK_TIMEOUT=5000                     # 5 seconds
HEALTH_CHECK_RETRIES=3
